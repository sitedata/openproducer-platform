window.wp=window.wp||{},window.wp.customizeWidgets=function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=426)}({0:function(e,t){e.exports=window.wp.element},1:function(e,t){e.exports=window.wp.i18n},10:function(e,t){e.exports=window.wp.compose},100:function(e,t,n){"use strict";var i=n(0),s=n(6);const o=Object(i.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(i.createElement)(s.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));t.a=o},12:function(e,t){e.exports=window.wp.keycodes},136:function(e,t,n){"use strict";var i=n(0),s=n(6);const o=Object(i.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(i.createElement)(s.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"}));t.a=o},14:function(e,t){e.exports=window.wp.coreData},19:function(e,t){e.exports=window.wp.hooks},2:function(e,t){e.exports=window.lodash},22:function(e,t){e.exports=window.wp.dom},3:function(e,t){e.exports=window.wp.components},4:function(e,t){e.exports=window.wp.data},426:function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return $}));var i=n(0),s=n(55),o=n(46),r=n(2),c=n(14),a=n(4),d=n(5),l=n(3),u=n(56),b=n(7),h=n(1),p=function({inspector:e,closeMenu:t,...n}){const s=Object(a.useSelect)(e=>e(d.store).getSelectedBlockClientId(),[]),o=Object(i.useMemo)(()=>document.getElementById("block-"+s),[s]);return Object(i.createElement)(l.MenuItem,Object(b.a)({onClick:()=>{e.open({returnFocusWhenClose:o}),t()}},n),Object(h.__)("Show more settings"))},m=n(136),g=n(10),w=n(100),f=function e({setIsOpened:t}){const n=Object(g.useInstanceId)(e,"customize-widget-layout__inserter-panel-title");return Object(i.createElement)("div",{className:"customize-widgets-layout__inserter-panel","aria-labelledby":n},Object(i.createElement)("div",{className:"customize-widgets-layout__inserter-panel-header"},Object(i.createElement)("h2",{id:n,className:"customize-widgets-layout__inserter-panel-header-title"},Object(h.__)("Add a block")),Object(i.createElement)(l.Button,{className:"customize-widgets-layout__inserter-panel-header-close-button",icon:w.a,onClick:()=>t(!1),"aria-label":Object(h.__)("Close inserter")})),Object(i.createElement)("div",{className:"customize-widgets-layout__inserter-panel-content"},Object(i.createElement)(d.__experimentalLibrary,{showInserterHelpPanel:!0,onSelect:()=>t(!1)})))},O=function({inserter:e,isInserterOpened:t,setIsInserterOpened:n}){return Object(i.createElement)(i.Fragment,null,Object(i.createElement)("div",{className:"customize-widgets-header"},Object(i.createElement)(d.NavigableToolbar,{className:"customize-widgets-header-toolbar","aria-label":Object(h.__)("Document tools")},Object(i.createElement)(l.ToolbarItem,{as:l.Button,className:"customize-widgets-header-toolbar__inserter-toggle",isPressed:t,isPrimary:!0,icon:m.a,label:Object(h._x)("Add block","Generic label for block inserter button"),onClick:()=>{n(e=>!e)}}))),Object(i.createPortal)(Object(i.createElement)(f,{setIsOpened:n}),e.contentContainer[0]))},j=n(8),_=n(50),C=n.n(_);function E(e,t=null){let n;if("core/legacy-widget"===e.name&&(e.attributes.id||e.attributes.instance))if(e.attributes.id)n={id:e.attributes.id};else{const{encoded:i,hash:s,raw:o,...r}=e.attributes.instance;n={idBase:e.attributes.idBase,instance:{...null==t?void 0:t.instance,encoded_serialized_instance:i,instance_hash_key:s,raw_instance:o,...r}}}else n={idBase:"block",widgetClass:"WP_Widget_Block",instance:{raw_instance:{content:Object(j.serialize)(e)}}};return{...Object(r.omit)(t,["form","rendered"]),...n}}function y({id:e,idBase:t,number:n,instance:i}){let s;const{encoded_serialized_instance:r,instance_hash_key:c,raw_instance:a,...d}=i;if("block"===t){const e=Object(j.parse)(a.content);s=e.length?e[0]:Object(j.createBlock)("core/paragraph",{})}else s=n?Object(j.createBlock)("core/legacy-widget",{idBase:t,instance:{encoded:r,hash:c,raw:a,...d}}):Object(j.createBlock)("core/legacy-widget",{id:e});return Object(o.addWidgetIdToBlock)(s,e)}function v(e){const t=e.match(/^widget_(.+)(?:\[(\d+)\])$/);return t?`${t[1]}-${parseInt(t[2],10)}`:e}const k=Object(i.createContext)();function x({api:e,sidebarControls:t,children:n}){const[s,o]=Object(i.useState)({current:null}),r=Object(i.useCallback)(e=>{for(const n of t)if(n.setting.get().includes(e)){n.sectionInstance.expand({completeCallback(){o({current:e})}});break}},[t]);Object(i.useEffect)(()=>{function t(e){const t=v(e);r(t)}function n(){e.previewer.preview.bind("focus-control-for-setting",t)}return e.previewer.bind("ready",n),()=>{e.previewer.unbind("ready",n),e.previewer.preview.unbind("focus-control-for-setting",t)}},[e,r]);const c=Object(i.useMemo)(()=>[s,r],[s,r]);return Object(i.createElement)(k.Provider,{value:c},n)}function S({sidebar:e,settings:t,children:n}){const[s,c,l]=function(e){const[t,n]=Object(i.useState)(()=>e.getWidgets().map(e=>y(e)));Object(i.useEffect)(()=>e.subscribe((e,t)=>{n(n=>{const i=new Map(e.map(e=>[e.id,e])),s=new Map(n.map(e=>[Object(o.getWidgetIdFromBlock)(e),e])),r=t.map(e=>{const t=i.get(e.id);return t&&t===e?s.get(e.id):y(e)});return C()(n,r)?n:r})}),[e]);const s=Object(i.useCallback)(t=>{n(n=>{if(C()(n,t))return n;const i=new Map(n.map(e=>[Object(o.getWidgetIdFromBlock)(e),e])),s=t.map(t=>{const n=Object(o.getWidgetIdFromBlock)(t);if(n&&i.has(n)){const s=i.get(n),o=e.getWidget(n);return Object(r.isEqual)(t,s)&&o?o:E(t,o)}return E(t)}),c=e.setWidgets(s);return t.reduce((e,n,i)=>{const s=c[i];return null!==s&&(e===t&&(e=t.slice()),e[i]=Object(o.addWidgetIdToBlock)(n,s)),e},t)})},[e]);return[t,s,s]}(e);return function(e){const{selectBlock:t}=Object(a.useDispatch)(d.store),[n]=Object(i.useContext)(k),s=Object(i.useRef)(e);Object(i.useEffect)(()=>{s.current=e},[e]),Object(i.useEffect)(()=>{if(n.current){const e=s.current.find(e=>Object(o.getWidgetIdFromBlock)(e)===n.current);if(e){t(e.clientId);const n=document.querySelector(`[data-block="${e.clientId}"]`);null==n||n.focus()}}},[n,t])}(s),Object(i.createElement)(d.BlockEditorProvider,{value:s,onInput:c,onChange:l,settings:t,useSubRegistry:!1},n)}function W({blockEditorSettings:e,sidebar:t,inserter:n,inspector:s}){const[o,b]=function(e){const[t,n]=Object(i.useState)(()=>e.isOpen);return Object(i.useEffect)(()=>e.subscribe(n),[e]),[t,Object(i.useCallback)(t=>{let n=t;"function"==typeof t&&(n=t(e.isOpen)),n?e.open():e.close()},[e])]}(n),h=Object(a.useSelect)(e=>Object(r.defaultTo)(e(c.store).canUser("create","media"),!0),[]),m=Object(i.useMemo)(()=>{let t;return h&&(t=({onError:t,...n})=>{Object(u.uploadMedia)({wpAllowedMimeTypes:e.allowedMimeTypes,onError:({message:e})=>t(e),...n})}),{...e,__experimentalSetIsInserterOpened:b,mediaUpload:t}},[h,e]),g=document.getElementById("customize-theme-controls");return Object(i.createElement)(i.Fragment,null,Object(i.createElement)(d.BlockEditorKeyboardShortcuts.Register,null),Object(i.createElement)(l.SlotFillProvider,null,Object(i.createElement)(S,{sidebar:t,settings:m},Object(i.createElement)(d.BlockEditorKeyboardShortcuts,null),Object(i.createElement)(O,{inserter:n,isInserterOpened:o,setIsInserterOpened:b}),Object(i.createElement)("div",{className:"customize-widgets__contextual-toolbar-wrapper"},Object(i.createElement)(l.Popover.Slot,{name:"block-toolbar"})),Object(i.createElement)(d.BlockSelectionClearer,null,Object(i.createElement)(d.WritingFlow,null,Object(i.createElement)(d.ObserveTyping,null,Object(i.createElement)(d.BlockList,null)))),Object(i.createPortal)(Object(i.createElement)("form",{onSubmit:e=>e.preventDefault()},Object(i.createElement)(d.BlockInspector,null)),s.contentContainer[0])),Object(i.createElement)(d.__unstableBlockSettingsMenuFirstItem,null,({onClose:e})=>Object(i.createElement)(p,{inspector:s,closeMenu:e})),Object(i.createPortal)(Object(i.createElement)(l.Popover.Slot,null),g)))}const B=Object(i.createContext)();function I({sidebarControls:e,activeSidebarControl:t,children:n}){const s=Object(i.useMemo)(()=>({sidebarControls:e,activeSidebarControl:t}),[e,t]);return Object(i.createElement)(B.Provider,{value:s},n)}function z({api:e,sidebarControls:t,blockEditorSettings:n}){const[s,o]=Object(i.useState)(null);Object(i.useEffect)(()=>{const e=t.map(e=>e.subscribe(t=>{t&&o(e)}));return()=>{e.forEach(e=>e())}},[t]);const r=s&&Object(i.createPortal)(Object(i.createElement)(W,{key:s.id,blockEditorSettings:n,sidebar:s.sidebarAdapter,inserter:s.inserter,inspector:s.inspector}),s.container[0]);return Object(i.createElement)(I,{sidebarControls:t,activeSidebarControl:s},Object(i.createElement)(x,{api:e,sidebarControls:t},r))}const{wp:M}=window;function P(e){const t=e.match(/^(.+)-(\d+)$/);return t?{idBase:t[1],number:parseInt(t[2],10)}:{idBase:e}}function F(e){const{idBase:t,number:n}=P(e);return n?`widget_${t}[${n}]`:"widget_"+t}class T{constructor(e,t){this.setting=e,this.api=t,this.locked=!1,this.widgetsCache=new WeakMap,this.subscribers=new Set,this.history=[this._getWidgetIds().map(e=>this.getWidget(e))],this.historyIndex=0,this.setting.bind(this._handleSettingChange.bind(this)),this.api.bind("change",this._handleAllSettingsChange.bind(this)),this.canUndo=this.canUndo.bind(this),this.canRedo=this.canRedo.bind(this),this.undo=this.undo.bind(this),this.redo=this.redo.bind(this)}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}getWidgets(){return this.history[this.historyIndex]}_emit(...e){for(const t of this.subscribers)t(...e)}_getWidgetIds(){return this.setting.get()}_pushHistory(){this.history=[...this.history.slice(0,this.historyIndex+1),this._getWidgetIds().map(e=>this.getWidget(e))],this.historyIndex+=1}_handleSettingChange(){if(this.locked)return;const e=this.getWidgets();this._pushHistory(),this._emit(e,this.getWidgets())}_handleAllSettingsChange(e){if(this.locked)return;if(!e.id.startsWith("widget_"))return;const t=v(e.id);if(!this.setting.get().includes(t))return;const n=this.getWidgets();this._pushHistory(),this._emit(n,this.getWidgets())}_createWidget(e){const t=M.customize.Widgets.availableWidgets.findWhere({id_base:e.idBase});let n=e.number;t.get("is_multi")&&!n&&(t.set("multi_number",t.get("multi_number")+1),n=t.get("multi_number"));const i=n?`widget_${e.idBase}[${n}]`:"widget_"+e.idBase,s={transport:M.customize.Widgets.data.selectiveRefreshableWidgets[t.get("id_base")]?"postMessage":"refresh",previewer:this.setting.previewer};return this.api.create(i,i,"",s).set(e.instance),v(i)}_removeWidget(e){const t=F(e.id);this.api.remove(t)}_updateWidget(e){const t=this.getWidget(e.id);if(t===e)return e.id;if(t.idBase&&e.idBase&&t.idBase===e.idBase){const t=F(e.id);return this.api(t).set(e.instance),e.id}return this._removeWidget(e),this._createWidget(e)}getWidget(e){if(!e)return null;const{idBase:t,number:n}=P(e),i=F(e),s=this.api(i);if(!s)return null;const o=s.get();if(this.widgetsCache.has(o))return this.widgetsCache.get(o);const r={id:e,idBase:t,number:n,instance:o};return this.widgetsCache.set(o,r),r}_updateWidgets(e){this.locked=!0;const t=[],n=e.map(e=>{if(e.id&&this.getWidget(e.id))return t.push(null),this._updateWidget(e);const n=this._createWidget(e);return t.push(n),n});return this.setting.set(n),this.locked=!1,t}setWidgets(e){const t=this._updateWidgets(e);return this._pushHistory(),t}canUndo(){return this.historyIndex>0}canRedo(){return this.historyIndex<this.history.length-1}_seek(e){const t=this.getWidgets();this.historyIndex=e;const n=this.history[this.historyIndex];this._updateWidgets(n),this._emit(t,this.getWidgets())}undo(){this.canUndo()&&this._seek(this.historyIndex-1)}redo(){this.canRedo()&&this._seek(this.historyIndex+1)}}var A=n(12),L=n(22);var N=n(19);const R=Object(g.createHigherOrderComponent)(e=>t=>{const n=Object(o.getWidgetIdFromBlock)(t),s=function(){const{sidebarControls:e}=Object(i.useContext)(B);return e}(),c=function(){const{activeSidebarControl:e}=Object(i.useContext)(B);return e}(),l=(null==s?void 0:s.length)>1,u=t.name,b=Object(a.useSelect)(e=>e(d.store).canInsertBlockType(u,""),[u]);return Object(i.createElement)(i.Fragment,null,Object(i.createElement)(e,t),l&&b&&Object(i.createElement)(d.BlockControls,null,Object(i.createElement)(o.MoveToWidgetArea,{widgetAreas:s.map(e=>({id:e.id,name:e.params.label,description:e.params.description})),currentWidgetAreaId:null==c?void 0:c.id,onSelect:function(e){const t=s.find(t=>t.id===e),i=c.setting,o=t.setting;i(Object(r.without)(i(),n)),o([...o(),n]),t.expand()}})))},"withMoveToSidebarToolbarItem");Object(N.addFilter)("editor.BlockEdit","core/customize-widgets/block-edit",R),Object(N.addFilter)("editor.MediaUpload","core/edit-widgets/replace-media-upload",()=>u.MediaUpload);const{wp:U}=window;function $(e,t){const n=Object(s.__experimentalGetCoreBlocks)().filter(e=>!["core/more"].includes(e.name));Object(s.registerCoreBlocks)(n),Object(s.__experimentalRegisterExperimentalCoreBlocks)({enableLegacyWidgetBlock:!0}),Object(o.registerLegacyWidgetVariations)(t);const r=function(){const{wp:{customize:e}}=window;return class extends e.Control{constructor(...e){super(...e),this.subscribers=new Set}ready(){const t=function(){const{wp:{customize:e}}=window,t=e.OuterSection;return e.OuterSection=class extends t{onChangeExpanded(t,n){return t&&e.section.each(e=>{"outer"===e.params.type&&e.id!==this.id&&e.expanded()&&e.collapse()}),super.onChangeExpanded(t,n)}},e.sectionConstructor.outer=e.OuterSection,class extends e.OuterSection{constructor(...e){super(...e),this.params.type="outer",this.activeElementBeforeExpanded=null,this.contentContainer[0].ownerDocument.defaultView.addEventListener("keydown",e=>{!this.isOpen||e.keyCode!==A.ESCAPE&&"Escape"!==e.code||(e.stopPropagation(),this.close())},!0),this.contentContainer.addClass("widgets-inserter")}get isOpen(){return this.expanded()}subscribe(e){return this.expanded.bind(e),()=>this.expanded.unbind(e)}open(){if(!this.isOpen){const e=this.contentContainer[0];this.activeElementBeforeExpanded=e.ownerDocument.activeElement,this.expand({completeCallback(){const t=L.focus.tabbable.find(e)[1];t&&t.focus()}})}}close(){if(this.isOpen){const e=this.contentContainer[0],t=e.ownerDocument.activeElement;this.collapse({completeCallback(){e.contains(t)&&this.activeElementBeforeExpanded&&this.activeElementBeforeExpanded.focus()}})}}}}();this.inserter=new t("widgets-inserter-"+this.id,{}),e.section.add(this.inserter),this.sectionInstance=e.section(this.section()),this.inspector=this.sectionInstance.inspector,this.sidebarAdapter=new T(this.setting,e)}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}onChangeSectionExpanded(e,t){t.unchanged||(e||this.inserter.close(),this.subscribers.forEach(n=>n(e,t)))}}}();U.customize.sectionConstructor.sidebar=function(){const{wp:{customize:e}}=window;return class extends e.Section{ready(){const t=function(){const{wp:{customize:e}}=window;return class extends e.Section{constructor(e,t){super(e,t),this.parentSection=t.parentSection,this.returnFocusWhenClose=null}ready(){this.contentContainer[0].classList.add("customize-widgets-layout__inspector")}onChangeExpanded(e,t){super.onChangeExpanded(e,t),this.parentSection&&!t.unchanged&&(e?this.parentSection.collapse({manualTransition:!0}):this.parentSection.expand({manualTransition:!0,completeCallback:()=>{this.returnFocusWhenClose&&!this.contentContainer[0].contains(this.returnFocusWhenClose)&&this.returnFocusWhenClose.focus()}}))}open({returnFocusWhenClose:e}={}){this.returnFocusWhenClose=e,this.expand({allowMultiple:!0})}close(){this.collapse({allowMultiple:!0})}}}();this.inspector=new t("widgets-inspector-"+this.id,{title:Object(h.__)("Block Settings"),parentSection:this,customizeAction:[Object(h.__)("Customizing"),Object(h.__)("Widgets"),this.params.title].join(" â–¸ ")}),e.section.add(this.inspector),this.contentContainer[0].classList.add("customize-widgets__sidebar-section")}hasSubSectionOpened(){return this.inspector.expanded()}onChangeExpanded(e,t){const n=this.controls(),i={...t,completeCallback(){var s;n.forEach(t=>{t.onChangeSectionExpanded(e,i)}),null===(s=t.completeCallback)||void 0===s||s.call(t)}};i.manualTransition?e?(this.contentContainer.addClass(["busy","open"]),this.contentContainer.removeClass("is-sub-section-open"),this.contentContainer.closest(".wp-full-overlay").addClass("section-open"),this.contentContainer.one("transitionend",()=>{this.contentContainer.removeClass("busy"),i.completeCallback()})):(this.contentContainer.addClass(["busy","is-sub-section-open"]),this.contentContainer.closest(".wp-full-overlay").addClass("section-open"),this.contentContainer.removeClass("open"),this.contentContainer.one("transitionend",()=>{this.contentContainer.removeClass("busy"),i.completeCallback()})):super.onChangeExpanded(e,i)}}}(),U.customize.controlConstructor.sidebar_block_editor=r;const c=document.createElement("div");document.body.appendChild(c),U.customize.bind("ready",()=>{const e=[];U.customize.control.each(t=>{t instanceof r&&e.push(t)}),Object(i.render)(Object(i.createElement)(z,{api:U.customize,sidebarControls:e,blockEditorSettings:t}),c)})}},46:function(e,t){e.exports=window.wp.widgets},5:function(e,t){e.exports=window.wp.blockEditor},50:function(e,t){e.exports=window.wp.isShallowEqual},55:function(e,t){e.exports=window.wp.blockLibrary},56:function(e,t){e.exports=window.wp.mediaUtils},6:function(e,t){e.exports=window.wp.primitives},7:function(e,t,n){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return i}))},8:function(e,t){e.exports=window.wp.blocks}});